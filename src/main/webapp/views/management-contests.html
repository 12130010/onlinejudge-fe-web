<h1 class="text-center">{{'contests' | translate}}</h1>
<div class="col-xs-12">
	<div class="col-xs-4">
		<a class="btn btn-custom" ng-click="createContest()">{{'managementcontest.add' | translate}}</a>
	</div>
	<div class="col-xs-4 pull-right">
	  <label for="search">{{'managementcontest.item.per.page' | translate}}:</label>
	  <input type="number" min="1" max="100" class="form-control" ng-model="pageSize">
	</div>
</div>
 <table class="table table-bordered">
    <thead>
      <tr bgcolor="#363636" style="color: white;">
        <th class="text-center">{{'student.short.name' | translate}}</th>
        <th class="text-center">{{'student.long.name' | translate}}</th>
        <th class="text-center">{{'student.description' | translate}}</th>
        <th class="text-center">{{'student.start.date' | translate}}</th>
        <th class="text-center">{{'student.freeze.date' | translate}}</th>
        <th class="text-center">{{'student.end.date' | translate}}</th>
        <th class="text-center">{{'student.member.per.team' | translate}}</th>
        <th class="text-center">{{'student.number.problem' | translate}}</th>
        <th class="text-center">{{'student.number.team' | translate}}</th>
        <th class="text-center">{{'update' | translate}}</th>
        <th class="text-center">{{'delete' | translate}}</th>
      </tr>
    </thead>
    <tbody>
      <tr dir-paginate="contest in listContest | itemsPerPage: pageSize">
      	<td>
      		{{contest.shortName}}
      	</td>
      	<td>
      		{{contest.longName}}
      	</td>
      	<td>
      		{{contest.description}}
      	</td>
      	<td>
      		{{contest.startDate | date: 'dd/MM/yyyy hh:mm:ss'}}
      	</td>
      	<td>
      		{{contest.freezeDate | date: 'dd/MM/yyyy hh:mm:ss'}}
      	</td>
      	<td>
      		{{contest.endDate | date: 'dd/MM/yyyy hh:mm:ss'}}
      	</td>
      	<td>
      		{{contest.numberMemPerTeam}}
      	</td>
      	<td>
      		<a ng-click="showListProblemForContest(contest.id)" style="cursor: pointer;">{{contest.listProblem.length}}</a>
      	</td>
      	<td>
      		<a ng-click="showListTeam(contest.id)" style="cursor: pointer;">{{contest.listTeam.length}}</a>
      	</td>
      	
      	<td>
      		<a class="btn btn-primary" ng-click="createTeam(contest.id)">{{'managementcontest.add.team' | translate}}</a>
      		<a class="btn btn-primary" ng-click="createProblemForContest(contest.id)">{{'managementcontest.add.problem' | translate}}</a>
      		<a class="btn btn-primary" ng-click="updateContest(contest.id)">{{'edit' | translate}}</a>
      	</td>
      	<td>
      		<a class="btn btn-danger" ng-click="deleteContest(contest.id)">{{'delete' | translate}}</a>
      	</td>
      </tr>
	</tbody>
</table>
 <div class="text-center">
	<dir-pagination-controls boundary-links="true" on-page-change="" template-url="views/dirPagination.tpl.html"></dir-pagination-controls>
</div>

  <!-- add contest -->
<div class="modal fade" id="modalAddContest" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" ng-click="closeForm()">&times;</button>
          <h4 ng-if="!contest.id" class="modal-title">{{'managementcontest.add' | translate}}</h4>
          <h4 ng-if="contest.id" class="modal-title">{{'managementcontest.update' | translate}}</h4>
        </div>
        <form class="form-style-9">
	        <div class="modal-body">
	        	<ul>
	        		<li>
						<div class="form-group">
							<label for="name" class="cols-sm-2 control-label">{{'student.short.name' | translate}}</label>
							<div class="cols-sm-10">
								<div class="input-group">
									<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
									<input type="text" class="form-control" name="name" id="name"  placeholder="Enter Contest's short name"
									ng-model="contest.shortName" required="required"/>
								</div>
							</div>
						</div>
					</li>
					<li>
						<div class="form-group">
							<label for="name" class="cols-sm-2 control-label">{{'student.long.name' | translate}}</label>
							<div class="cols-sm-10">
								<div class="input-group">
									<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
									<input type="text" class="form-control" name="name" id="name"  placeholder="Enter Contest's long name"
									ng-model="contest.longName" required="required"/>
								</div>
							</div>
						</div>
					</li>
					<li>
						<div class="form-group">
							<label for="name" class="cols-sm-2 control-label">{{'student.description' | translate}}</label>
							<div class="cols-sm-10">
								<div class="input-group">
									<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
									<input type="text" class="form-control" name="name" id="name"  placeholder="Enter Contest's desciption"
									ng-model="contest.description" required="required"/>
								</div>
							</div>
						</div>
					</li>
					<li>
						<div class="form-group">
							<label for="name" class="cols-sm-2 control-label">{{'student.start.date' | translate}}: dd-mm-yyyy hh:mm:ss</label>
							<div class="cols-sm-10">
								<div class="input-group">
									<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
									<input type="text" class="form-control" name="name" id="name"  placeholder="Start date"
									ng-model="contest.startDate" required="required" mask-input="99-99-9999 99:99:99" mask-input-placeholder="dd-mm-yyyy hh:mm:ss"/>
								</div>
							</div>
						</div>
					</li>
					<li>
						<div class="form-group">
							<label for="name" class="cols-sm-2 control-label">{{'student.freeze.date' | translate}}: dd-mm-yyyy hh:mm:ss</label>
							<div class="cols-sm-10">
								<div class="input-group">
									<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
									<input type="text" class="form-control" name="name" id="name"  placeholder="Freeze date"
									ng-model="contest.freezeDate" required="required" mask-input="99-99-9999 99:99:99" mask-input-placeholder="dd-mm-yyyy hh:mm:ss"/>
								</div>
							</div>
						</div>
					</li>
					<li>	
						<div class="form-group">
							<label for="name" class="cols-sm-2 control-label">{{'student.end.date' | translate}}: dd-mm-yyyy hh:mm:ss</label>
							<div class="cols-sm-10">
								<div class="input-group">
									<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
									<input type="text" class="form-control" name="name" id="name"  placeholder="End date"
									ng-model="contest.endDate" required="required" mask-input="99-99-9999 99:99:99" mask-input-placeholder="dd-mm-yyyy hh:mm:ss"/>
								</div>
							</div>
						</div>
					</li>
					<li>	
						<div class="form-group">
							<label for="name" class="cols-sm-2 control-label">{{'student.member.per.team' | translate}}</label>
							<div class="cols-sm-10">
								<div class="input-group">
									<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
									<input type="number" class="form-control" name="name" id="name"  placeholder="Number member"
									ng-model="contest.numberMemPerTeam" required="required"/>
								</div>
							</div>
						</div>
					</li>	
	<!-- 					<div class="form-group"> -->
	<!-- 						<label for="name" class="cols-sm-2 control-label">Self register</label> -->
	<!-- 						<div class="cols-sm-10"> -->
	<!-- 							<div class="input-group"> -->
	<!-- 								<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span> -->
	<!-- 								 <md-checkbox ng-model="contest.selfRegister"> -->
	<!-- 						           Self registry -->
	<!-- 						         </md-checkbox> -->
	<!-- 							</div> -->
	<!-- 						</div> -->
	<!-- 					</div> -->
				</ul>		
	        </div>
        </form>
        <div class="modal-footer">
          <button ng-if="!contest.id" type="button" class="btn btn-success" ng-click="saveContest()">{{'managementcontest.add' | translate}}</button>
          <button ng-if="contest.id" type="button" class="btn btn-success" ng-click="saveContest()">{{'managementcontest.update' | translate}}</button>
          <button type="button" class="btn btn-default" ng-click="closeForm()">{{'managementcontest.close' | translate}}</button>
        </div>
      </div>
  </div>
</div>

  <!-- add Team -->
<div class="modal fade" id="modalAddTeam" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" ng-click="closeForm()">&times;</button>
          <h4 class="modal-title">{{'management.contests.add.new.team' | translate}} {{contestSelected.shortName + " - " + contestSelected.longName}}</h4>
        </div>
        <div class="modal-body">
			 <form class="form-style-9">
			 	<ul>
			 		<li>
						<div class="form-group">
							<label for="name" class="cols-sm-2 control-label">{{'management.contests.team.name' | translate}}</label>
							<div class="cols-sm-10">
								<div class="input-group">
									<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
									<input type="text" class="form-control" name="name" id="name"  placeholder="Team's name"
									ng-model="team.name" required="required"/>
								</div>
							</div>
						</div>
					</li>
					<li>
						<div class="form-group">
							<label for="name" class="cols-sm-2 control-label">{{'management.contests.member.email' | translate}}</label>
							<div class="cols-sm-10">
								<div class="input-group">
									<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
									<ul>
										<li ng-repeat="member in team.listMember" style="margin-bottom: 0;min-height: 0;">{{member.email}} | <a ng-click="deleteMember(member.email)" style="cursor: pointer;"> x</a></li>
									</ul>
								</div>
							</div>
						</div>
					</li>
					<li>
						<div class="form-group">
							<label for="name" class="cols-sm-2 control-label">{{'management.contests.email.of.member' | translate}}</label>
							<div class="cols-sm-10">
								<div class="input-group">
									<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
									<input type="email" class="form-control" name="name" id="name"  placeholder="Email"
									ng-model="emailOfMember" required="required"/>
									<button type="button" ng-click="addMember()" class="btn btn-success">Add member to team</button>
								</div>
							</div>
						</div>
					</li>
				</ul>
			</form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-success" ng-click="addTeam()">{{'managementcontest.add.team' | translate}}</button>
          <button type="button" class="btn btn-default" ng-click="closeForm()">{{'management.contests.close' | translate}}</button>
        </div>
      </div>
  </div>
</div>

<!-- add ProblemForContest -->
<div class="modal fade" id="modalAddProblemForContest" role="dialog">
    <div class="modal-dialog" style="width: 700px;">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" ng-click="closeForm()">&times;</button>
          <h4 class="modal-title">{{'management.contests.add.problem.to.contest' | translate}} {{contestSelected.shortName + " - " + contestSelected.longName}}</h4>
        </div>
        <div class="modal-body">
			<form class="form-style-9">
				<ul>
					<li>
						<div class="form-group">
							<label for="name" class="cols-sm-2 control-label">{{'management.contests.list.problem' | translate}}</label>
							<div class="cols-sm-10">
								<div class="input-group">
									<span class="input-group-addon" ><i class="fa fa-user fa" aria-hidden="true"></i></span>
									<select size="6" ng-model="problemSelected" style="color: black;" class="form-control">
										<option ng-repeat="problem in listProblem" ng-value="problem">{{problem.name}}</option>
									</select>
								</div>
							</div>
						</div>
					</li>
					<li>
						<div class="form-group">
							<label for="name" class="cols-sm-2 control-label">{{'management.contests.original.problem' | translate}}</label>
							<div class="cols-sm-10">
								<div class="input-group">
									<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
									<input type="text" class="form-control" name="name" id="name"
									ng-model="problemSelected.name" required="required" readonly="readonly"/>
								</div>
							</div>
						</div>
					</li>
					<li>
						<div class="form-group">
							<label for="name" class="cols-sm-2 control-label">{{'management.contests.index' | translate}}</label>
							<div class="cols-sm-10">
								<div class="input-group">
									<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
									<input type="number" class="form-control" name="name" id="name"  placeholder="Email"
									ng-model="problemForContest.index" required="required"/>
								</div>
							</div>
						</div>
					</li>
					<li>
						<div class="form-group">
							<label for="name" class="cols-sm-2 control-label">{{'management.contests.display.name' | translate}}</label>
							<div class="cols-sm-10">
								<div class="input-group">
									<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
									<input type="text" class="form-control" name="name" id="name"  placeholder="Display name"
									ng-model="problemForContest.nameDisplay" required="required"/>
								</div>
							</div>
						</div>
					</li>
					<li>
						<div class="form-group">
							<label for="name" class="cols-sm-2 control-label">{{'management.contests.color' | translate}}</label>
							<div class="cols-sm-10">
								<div class="input-group">
									<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
									<input type="text" class="form-control" name="name" id="name"  placeholder="Color"
									ng-model="problemForContest.color" required="required"/>
								</div>
							</div>
						</div>
					</li>
					<li>
						<div class="form-group">
							<label for="name" class="cols-sm-2 control-label">{{'management.contests.score' | translate}}</label>
							<div class="cols-sm-10">
								<div class="input-group">
									<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
									<input type="number" class="form-control" name="name" id="name"  placeholder="Email"
									ng-model="problemForContest.score" required="required"/>
								</div>
							</div>
						</div>
					</li>
					<li>
						<div class="form-group">
							<label for="name" class="cols-sm-2 control-label">{{'management.contests.score' | translate}}</label>
							<div class="cols-sm-10">
								<div class="input-group">
									<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
									<button type="button" class="btn btn-primary" ng-click="addNewProblemForContest()">{{isEditing ? 'management.contests.update.problem' : 'management.contests.add.problem' | translate }}</button> 
								</div>
							</div>
						</div>
					</li>
				</ul>
			</form>
		</div> <!-- END main-login main-center -->
        <div class="modal-footer">
        	<table class="table table-bordered">
					<thead>
						<tr>
							<th class="text-center">{{'management.contests.index' | translate}}</th>
							<th class="text-center">{{'management.contests.original.problem' | translate}}</th>
							<th class="text-center">{{'management.contests.display.name' | translate}}</th>
							<th class="text-center">{{'management.contests.color' | translate}}</th>
							<th class="text-center">{{'management.contests.score' | translate}}</th>
							<th class="text-center">{{'management.contests.update.action' | translate}}</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="problemForContest in listProblemForContest track by $index">
							<td>{{problemForContest.index}}</td>
							<td>{{problemForContest.problem.name}}</td>
							<td>{{problemForContest.nameDisplay}}</td>
							<td>{{problemForContest.color}}</td>
							<td>{{problemForContest.score}}</td>
							<td>
								<button type="button" class="btn btn-primary" ng-click="editProblemForContest($index)">{{'management.contests.update.problem' | translate}}</button>
								<button type="button" class="btn btn-danger" ng-click="removeProblemForContest($index)">{{'management.contests.delete' | translate}}</button>
							</td>
						</tr>
					</tbody>
				</table>
	          <button type="button" class="btn btn-success" ng-click="updateProblemForContest()">{{'management.contests.update.problem' | translate}}</button>
	          <button type="button" class="btn btn-default" ng-click="closeForm()">{{'close' | translate}}</button>
        </div>
      </div>
  </div>
</div>

<!-- Show list ProblemForContest -->
<div class="modal fade" id="modalShowListProblemForContest" role="dialog">
    <div class="modal-dialog" style="width: 700px;">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" ng-click="closeForm()">&times;</button>
          <h4 class="modal-title">{{'management.contests.list.problem.of.contest' | translate}} {{contestSelected.shortName + " - " + contestSelected.longName}}</h4>
        </div>
        <div class="modal-body">
			<div class="row main" style="margin: 0;">
				<div class="main-login" style="max-width: 100%;">
					<table class="table table-bordered">
						<thead>
							<tr bgcolor="#363636" style="color: white;">
								<th class="text-center">{{'management.contests.index' | translate}}</th>
								<th class="text-center">{{'management.contests.original.problem' | translate}}</th>
								<th class="text-center">{{'management.contests.display.name' | translate}}</th>
								<th class="text-center">{{'management.contests.color' | translate}}</th>
								<th class="text-center">{{'management.contests.score' | translate}}</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="problemForContest in listProblemForContest track by $index">
								<td class="text-center">{{problemForContest.index}}</td>
								<td>{{problemForContest.problem.name}}</td>
								<td>{{problemForContest.nameDisplay}}</td>
								<td>{{problemForContest.color}}</td>
								<td class="text-center">{{problemForContest.score}}</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" ng-click="closeForm()">{{'management.contests.close' | translate}}</button>
        </div>
      </div>
  </div>
</div>


<!-- Show list Team -->
<div class="modal fade" id="modalShowListTeam" role="dialog">
    <div class="modal-dialog" style="width: 700px;">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" ng-click="closeForm()">&times;</button>
          <h4 class="modal-title">{{'management.contests.list.team.of.contest' | translate}} {{contestSelected.shortName + " - " + contestSelected.longName}}</h4>
        </div>
        <div class="modal-body">
			<div class="row main" style="margin: 0;">
				<div class="main-login" style="max-width: 100%;">
					<table class="table table-bordered">
						<thead>
							<tr bgcolor="#363636" style="color: white;">
								<th class="text-center">{{'management.contests.index' | translate}}</th>
								<th class="text-center">{{'management.contests.team.name' | translate}}</th>
								<th class="text-center">{{'management.contests.member.email' | translate}}</th>
								<th class="text-center">{{'management.contests.update.action' | translate}}</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="team in listTeam track by $index">
								<td class="text-center">{{$index + 1}}</td>
								<td>{{team.name}}</td>
								<td>
									<ul>
										<li ng-repeat="member in team.listMember">{{member.email}}</li>
									</ul>
								</td>
								<td class="text-center"><button ng-click="deleteTeam(team.id)" class="btn btn-danger">{{'management.contests.delete' | translate}}</button></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" ng-click="closeForm()">{{'close' | translate}}</button>
        </div>
      </div>
  </div>
</div>