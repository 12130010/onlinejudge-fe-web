<h1>List Contest</h1>
<div class="col-xs-12">
	<div class="col-xs-4">
		<a class="btn btn-primary" ng-click="createContest()">Add new Contest</a>
	</div>
	<div class="col-xs-4 pull-right">
	  <label for="search">items per page:</label>
	  <input type="number" min="1" max="100" class="form-control" ng-model="pageSize">
	</div>
</div>
 <table class="table table-bordered">
    <thead>
      <tr>
        <th>Short name</th>
        <th>Long name</th>
        <th>Description</th>
        <th>Start date</th>
        <th>Freeze date</th>
        <th>End date</th>
        <th>Self register</th>
        <th>Number member per team</th>
        <th>Number problem</th>
        <th>Number team</th>
        <th>Update</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody>
      <tr dir-paginate="contest in listContest | itemsPerPage: pageSize">
      	<td>
      		{{contest.shortName}}
      	</td>
      	<td>
      		{{contest.longName}}
      	</td>
      	<td>
      		{{contest.description}}
      	</td>
      	<td>
      		{{contest.startDate | date: 'dd/MM/yyyy hh:mm:ss'}}
      	</td>
      	<td>
      		{{contest.freezeDate | date: 'dd/MM/yyyy hh:mm:ss'}}
      	</td>
      	<td>
      		{{contest.endDate | date: 'dd/MM/yyyy hh:mm:ss'}}
      	</td>
      	<td>
      		{{contest.selfRegister}}
      	</td>
      	<td>
      		{{contest.numberMemPerTeam}}
      	</td>
      	<td>
      		<a ng-click="showListProblemForContest(contest.id)" style="cursor: pointer;">{{contest.listProblem.length}}</a>
      	</td>
      	<td>
      		<a ng-click="showListTeam(contest.id)" style="cursor: pointer;">{{contest.listTeam.length}}</a>
      	</td>
      	
      	<td>
      		<a class="btn btn-primary" ng-click="createTeam(contest.id)">Add Team</a>
      		<a class="btn btn-primary" ng-click="createProblemForContest(contest.id)">Add Problem</a>
      		<a class="btn btn-primary" ng-click="updateContest(contest.id)">Edit</a>
      	</td>
      	<td>
      		<a class="btn btn-danger" ng-click="deleteContest(contest.id)">Delete</a>
      	</td>
      </tr>
	</tbody>
</table>
 <div class="text-center">
	<dir-pagination-controls boundary-links="true" on-page-change="" template-url="views/dirPagination.tpl.html"></dir-pagination-controls>
</div>

  <!-- add contest -->
<div class="modal fade" id="modalAddContest" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" ng-click="closeForm()">&times;</button>
          <h4 ng-if="!contest.id" class="modal-title">Add new contest</h4>
          <h4 ng-if="contest.id" class="modal-title">Update contest</h4>
        </div>
        <div class="modal-body">
			<div class="row main" style="margin: 0 15px;">
				<div class="main-login main-center" style="max-width: 100%;">
					<div class="form-group">
						<label for="name" class="cols-sm-2 control-label">Short name</label>
						<div class="cols-sm-10">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
								<input type="text" class="form-control" name="name" id="name"  placeholder="Enter Contest's short name"
								ng-model="contest.shortName" required="required"/>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label for="name" class="cols-sm-2 control-label">Long name</label>
						<div class="cols-sm-10">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
								<input type="text" class="form-control" name="name" id="name"  placeholder="Enter Contest's long name"
								ng-model="contest.longName" required="required"/>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label for="name" class="cols-sm-2 control-label">Description</label>
						<div class="cols-sm-10">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
								<input type="text" class="form-control" name="name" id="name"  placeholder="Enter Contest's desciption"
								ng-model="contest.description" required="required"/>
							</div>
						</div>
					</div>
					
					<div class="form-group">
						<label for="name" class="cols-sm-2 control-label">Start date: dd-mm-yyyy hh:mm:ss</label>
						<div class="cols-sm-10">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
								<input type="text" class="form-control" name="name" id="name"  placeholder="Start date"
								ng-model="contest.startDate" required="required" mask-input="99-99-9999 99:99:99" mask-input-placeholder="dd-mm-yyyy hh:mm:ss"/>
							</div>
						</div>
					</div>
					
					<div class="form-group">
						<label for="name" class="cols-sm-2 control-label">Freeze date: dd-mm-yyyy hh:mm:ss</label>
						<div class="cols-sm-10">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
								<input type="text" class="form-control" name="name" id="name"  placeholder="Freeze date"
								ng-model="contest.freezeDate" required="required" mask-input="99-99-9999 99:99:99" mask-input-placeholder="dd-mm-yyyy hh:mm:ss"/>
							</div>
						</div>
					</div>
					
					<div class="form-group">
						<label for="name" class="cols-sm-2 control-label">End date: dd-mm-yyyy hh:mm:ss</label>
						<div class="cols-sm-10">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
								<input type="text" class="form-control" name="name" id="name"  placeholder="End date"
								ng-model="contest.endDate" required="required" mask-input="99-99-9999 99:99:99" mask-input-placeholder="dd-mm-yyyy hh:mm:ss"/>
							</div>
						</div>
					</div>
					
					<div class="form-group">
						<label for="name" class="cols-sm-2 control-label">Number member per team</label>
						<div class="cols-sm-10">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
								<input type="number" class="form-control" name="name" id="name"  placeholder="Number member"
								ng-model="contest.numberMemPerTeam" required="required"/>
							</div>
						</div>
					</div>
					
					<div class="form-group">
						<label for="name" class="cols-sm-2 control-label">Self register</label>
						<div class="cols-sm-10">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
								 <md-checkbox ng-model="contest.selfRegister">
						           Self registry
						         </md-checkbox>
							</div>
						</div>
					</div>
					
				</div>
			</div>
        </div>
        <div class="modal-footer">
          <button ng-if="!contest.id" type="button" class="btn btn-success" ng-click="saveContest()">Add contest</button>
          <button ng-if="contest.id" type="button" class="btn btn-success" ng-click="saveContest()">Update contest</button>
          <button type="button" class="btn btn-default" ng-click="closeForm()">Close</button>
        </div>
      </div>
  </div>
</div>

  <!-- add Team -->
<div class="modal fade" id="modalAddTeam" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" ng-click="closeForm()">&times;</button>
          <h4 class="modal-title">Add new Team to Contest: {{contestSelected.shortName + " - " + contestSelected.longName}}</h4>
        </div>
        <div class="modal-body">
			<div class="row main" style="margin: 0 15px;">
				<div class="main-login main-center" style="max-width: 100%;">
					<div class="form-group">
						<label for="name" class="cols-sm-2 control-label">Team's name</label>
						<div class="cols-sm-10">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
								<input type="text" class="form-control" name="name" id="name"  placeholder="Team's name"
								ng-model="team.name" required="required"/>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label for="name" class="cols-sm-2 control-label">Member's email</label>
						<div class="cols-sm-10">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
								<ul>
									<li ng-repeat="member in team.listMember">{{member.email}} | <a ng-click="deleteMember(member.email)" style="cursor: pointer;"> x</a></li>
								</ul>
							</div>
						</div>
					</div>
					
					<div class="form-group">
						<label for="name" class="cols-sm-2 control-label">Email of member</label>
						<div class="cols-sm-10">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
								<input type="email" class="form-control" name="name" id="name"  placeholder="Email"
								ng-model="emailOfMember" required="required"/>
								<button ng-click="addMember()" class="btn btn-success">Add member to team</button>
							</div>
						</div>
					</div>
					
				</div> <!-- END main-login main-center -->
			</div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-success" ng-click="addTeam()">Add team</button>
          <button type="button" class="btn btn-default" ng-click="closeForm()">Close</button>
        </div>
      </div>
  </div>
</div>

<!-- add ProblemForContest -->
<div class="modal fade" id="modalAddProblemForContest" role="dialog">
    <div class="modal-dialog" style="width: 700px;">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" ng-click="closeForm()">&times;</button>
          <h4 class="modal-title">Add new Problem to Contest: {{contestSelected.shortName + " - " + contestSelected.longName}}</h4>
        </div>
        <div class="modal-body">
			<div class="row main" style="margin: 0 15px;">
				<div class="main-login main-center" style="max-width: 100%;">
					<div class="form-group">
						<label for="name" class="cols-sm-2 control-label">List problem</label>
						<div class="cols-sm-10">
							<div class="input-group">
								<span class="input-group-addon" ><i class="fa fa-user fa" aria-hidden="true"></i></span>
								<select size="6" ng-model="problemSelected" style="color: black;">
									<option ng-repeat="problem in listProblem" ng-value="problem">{{problem.name}}</option>
								</select>
							</div>
						</div>
					</div>
					
					<div class="form-group">
						<label for="name" class="cols-sm-2 control-label">Original problem</label>
						<div class="cols-sm-10">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
								<input type="text" class="form-control" name="name" id="name"
								ng-model="problemSelected.name" required="required" readonly="readonly"/>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label for="name" class="cols-sm-2 control-label">Index</label>
						<div class="cols-sm-10">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
								<input type="number" class="form-control" name="name" id="name"  placeholder="Email"
								ng-model="problemForContest.index" required="required"/>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label for="name" class="cols-sm-2 control-label">Display Name</label>
						<div class="cols-sm-10">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
								<input type="text" class="form-control" name="name" id="name"  placeholder="Display name"
								ng-model="problemForContest.nameDisplay" required="required"/>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label for="name" class="cols-sm-2 control-label">Color</label>
						<div class="cols-sm-10">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
								<input type="text" class="form-control" name="name" id="name"  placeholder="Color"
								ng-model="problemForContest.color" required="required"/>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label for="name" class="cols-sm-2 control-label">Score</label>
						<div class="cols-sm-10">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
								<input type="number" class="form-control" name="name" id="name"  placeholder="Email"
								ng-model="problemForContest.score" required="required"/>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label for="name" class="cols-sm-2 control-label">Score</label>
						<div class="cols-sm-10">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
								<button ng-click="addNewProblemForContest()">{{isEditing ? "Update problem" : "Add problem" }}</button> 
							</div>
						</div>
					</div>
					
				</div> <!-- END main-login main-center -->
				<table class="table table-bordered">
					<thead>
						<tr>
							<th>Index</th>
							<th>Original Name</th>
							<th>Display name</th>
							<th>Color</th>
							<th>Score</th>
							<th>Action</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="problemForContest in listProblemForContest track by $index">
							<td>{{problemForContest.index}}</td>
							<td>{{problemForContest.problem.name}}</td>
							<td>{{problemForContest.nameDisplay}}</td>
							<td>{{problemForContest.color}}</td>
							<td>{{problemForContest.score}}</td>
							<td>
								<button ng-click="editProblemForContest($index)">Update</button>
								<button ng-click="removeProblemForContest($index)">Delete</button>
							</td>
						</tr>
					</tbody>
				</table>	
			</div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-success" ng-click="updateProblemForContest()">Update Problem</button>
          <button type="button" class="btn btn-default" ng-click="closeForm()">Close</button>
        </div>
      </div>
  </div>
</div>

<!-- Show list ProblemForContest -->
<div class="modal fade" id="modalShowListProblemForContest" role="dialog">
    <div class="modal-dialog" style="width: 700px;">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" ng-click="closeForm()">&times;</button>
          <h4 class="modal-title">List Problem of Contest: {{contestSelected.shortName + " - " + contestSelected.longName}}</h4>
        </div>
        <div class="modal-body">
			<div class="row main" style="margin: 0 15px;">
				<div class="main-login main-center" style="max-width: 100%;">
					<table class="table table-bordered">
						<thead>
							<tr>
								<th>Index</th>
								<th>Original Name</th>
								<th>Display name</th>
								<th>Color</th>
								<th>Score</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="problemForContest in listProblemForContest track by $index">
								<td>{{problemForContest.index}}</td>
								<td>{{problemForContest.problem.name}}</td>
								<td>{{problemForContest.nameDisplay}}</td>
								<td>{{problemForContest.color}}</td>
								<td>{{problemForContest.score}}</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" ng-click="closeForm()">Close</button>
        </div>
      </div>
  </div>
</div>


<!-- Show list Team -->
<div class="modal fade" id="modalShowListTeam" role="dialog">
    <div class="modal-dialog" style="width: 700px;">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" ng-click="closeForm()">&times;</button>
          <h4 class="modal-title">List team of Contest: {{contestSelected.shortName + " - " + contestSelected.longName}}</h4>
        </div>
        <div class="modal-body">
			<div class="row main" style="margin: 0 15px;">
				<div class="main-login main-center" style="max-width: 100%;">
					<table class="table table-bordered">
						<thead>
							<tr>
								<th>Index</th>
								<th>Team's Name</th>
								<th>Member</th>
								<th>Action</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="team in listTeam track by $index">
								<td>{{$index + 1}}</td>
								<td>{{team.name}}</td>
								<td>
									<ul>
										<li ng-repeat="member in team.listMember">{{member.email}}</li>
									</ul>
								</td>
								<td><button ng-click="deleteTeam(team.id)">Delete</button></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" ng-click="closeForm()">Close</button>
        </div>
      </div>
  </div>
</div>